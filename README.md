# F1 Final Project

This repository contains the code and resources for the F1 final project.  
It uses R, `renv`, and Docker to ensure reproducibility of analyses and automated report generation.


## DockerHub Image

  - The image is available on DockerHub: https://hub.docker.com/repository/docker/nazizanaeer/f1_image/general 
  - You can pull it directly without building by running the following command on bash: `docker pull nazizanaeer/f1_image`


## Project Organization

  - `code/` - R scripts for cdata cleaning, analysis, regression, and report rendering
  - `f1_datasets/` - input datasets
  - `output/` - intermediate results (tables, plots, regression outputs)
  - `final_report/` - empty directory mounted to folder of same name in container to keep generated `report.html`
  - `Dockerfile` - instructions for building container
  - `Makefile` - automation rules for building, cleaning, and running project
  - `renv.lock` - dependency lockfile for reproducible R environments 
  - `renv/` - configuration files and scripts used by renv package manager to reproduce R environment


## Generating Final Report

  - Use `make install` to restore package library with renv  
  - Use `make report.html` to build report locally (requires R and all packages installed on your machine)
  - Use `make project_image` to build docker image
  - Use `make final_report/report.html` to build report automatically inside Docker container made from the image mentioned above (recommended for reproducibility)  
  - Use `make clean` to remove all generated outputs and start fresh  


## Code Description

`code/00_clean_data.R`

  - reads multiple Formula 1 datasets from the folder `f1_datasets/`
  - filters data for Charles Leclerc's races with Ferrari (2019-2024)
  - merges datasets and selects relevant variables 
  - creates new categorical variable based on race finish position 
  - assigns variable labels for clarity 
  - saves cleaned datasets as `.rds` objects in the `output/` folder

`code/01_make_table1.R`

  - reads cleaned subdataset `output/table1_vars.rds`
  - generates Table 1 summarizing Charles Leclerc's race statistics by performance category
  - uses median (IQR) for most variables and mean Â± SD for fastest lap speed
  - adds overall and p-value columns for group comparison
  - saves summary table as `output/table1.rds`

`code/02_make_scatter.R`

  - reads cleaned dataset `output/data1.rds`
  - creates scatter plot of qualifying position vs. race finish position for Charles Leclerc
  - colors data points by performance category (Podium, Points Zone, Non-Scoring) using Ferrari-inspired colors
  - reverses both axes to reflect racing order and adds a reference line (y = x)
  - saves plot as `output/scatterplot.png`

`code/03_regression.R`

  - reads cleaned dataset `output/data1.rds`
  - creates binary variables indicating whether Leclerc started on pole position and whether he won or finished on the podium
  - runs logistic regression to assess the effect of starting on pole position on the likelihood of winning
  - generates formatted regression table displaying odds ratios (OR), 95% confidence intervals, and p-values
  - saves table as `output/regression.rds`

`code/04_render_report.R`

  - renders final project report `report.Rmd` into `.html` file
  - compiles outputs generated by previous `.R` scripts 
  - saves rendered report as `report.html` in project directory


